dataset
dataset %>%
group_by(name, year) %>%
sum(gender == "F")
dataset %>%
group_by(name, year) %>%
summarise(sm = sum(gender == "F"))
?n
dataset %>% sample_n(10000) %>%
group_by(name, year) %>%
summarise(sm = sum(gender == "F")/n())
dataset
dataset %>%
filter(count > 499) %>%
sample_n(10000) %>%
group_by(name, year) %>%
summarise(sm = sum(gender == "F") / n())
dataset %>%
filter(count > 499) %>%
sample_n(10000) %>%
group_by(name, year) %>%
summarise(per_f = sum(gender == "F") / n()) %>%
filter(per_f < 1) %>%
filter(per_f > 0)
dataset %>%
filter(count > 499) %>%
sample_n(10000) %>%
group_by(name, year) %>%
summarize(n = n())
dataset %>%
filter(count > 499) %>%
sample_n(10000) %>%
group_by(name, year) %>%
summarize(n = sum(count))
dataset %>%
filter(count > 499) %>%
sample_n(10000) %>%
group_by(name, year) %>%
summarise(per_f = sum(gender == "F") / sum(count)) %>%
filter(per_f < 1) %>%
filter(per_f > 0)
dataset %>%
filter(count > 499) %>%
sample_n(10000) %>%
group_by(name, year) %>%
summarise(per_f = sum(gender == "F") / sum(count))
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970)
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, year) %>%
summarise(per_f = sum(gender == "F") / sum(count))
dataset_old
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name) %>%
summarise(per_f = sum(gender == "F") / sum(count))
dataset_old
View(dataset_old)
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name) %>%
summarise(per_f = sum(gender == "F"))
dataset
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name) %>%
summarise(per_f = sum(filter(gender == M) %>% select(count)),
per_m = sum(gender == "M"))
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name) %>%
summarise(per_f = sum(filter(gender == "M") %>% select(count)),
per_m = sum(gender == "M"))
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
collect()
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
summarise(total = sum(count))
dataset_old
?summarise_each
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
summarise(total = sum(count)) %>%
arrange(name, gender)
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
summarise_if(gender == "F", sum(count))
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
summarise(total = sum(count)) %>%
arrange(name, gender)
dataset
?tally
dataset %>% tally(wt = count)
dataset %>% group_by(gender) %>% tally(wt = count)
dataset %>% group_by(gender, year) %>% tally(wt = count)
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(year, gender) %>%
tally(wt = count)
dataset_old
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(year, gender) %>%
tally(wt = count)
dataset_old
dataset_old <- dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count)
dataset_old
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
arrange(name)
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
arrange(name) %>%
group_by(name) %>%
filter(n() < 2)
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
arrange(name)
?tally
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = tally) %>%
arrange(name)
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name)
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name)
dataset %>%
filter(count > 499) %>%
filter(year < 1970) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender)
tibble(a = sample(letters))
tibble(a = sample(c("a","b")))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
tibble(a = sample(c("a","b"), replace = TRUE))
?sample
tibble(a = sample(c("a","b"), replace = TRUE, size = 10))
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10))
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10))
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
tibble(a = sample(c("a","b"), replace = TRUE, size = 10), b = rnorm(10, mean = 10)) %>% group_by(a) %>% tally(wt = b)
summarize_names <- function(start = 0, end = Inf, gender_arg = 'F') {
dataset %>%
filter(count > 499) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg)
}
summarize_names()
summarize_names(gender_arg = "M")
table(dataset$gender)
tally(dataset, wt = count)
dataset %>%
group_by(gender) %>%
tally(wt = count)
dataset %>%
group_by(gender) %>%
tally(wt = count) %>%
rename(count = wt)
dataset %>%
group_by(gender) %>%
tally(wt = count) %>%
rename(count = n)
dataset %>%
group_by(year, gender) %>%
tally(wt = count) %>%
rename(count = n)
dataset %>%
group_by(year, gender) %>%
tally(wt = count) %>%
rename(count = n) %>% print
gender_balance <- dataset %>%
group_by(year, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
ungroup() %>%
group_by(year) %>%
mutate(percent = count / sum(count))
gender_balanbce
gender_balance
census <- read.table("http://www.census.gov/popest/data/state/asrh/2013/files/SCPRC-EST2013-18+POP-RES.csv",
header = TRUE,
sep = ",",
stringsAsFactors = FALSE)
dataset
dataset %>%
group_by(year, gender) %>%
tally(wt = count)
gender_balance <- dataset %>%
group_by(year, gender) %>%
tally(wt = count)
gender_balance <- dataset %>%
group_by(year, gender) %>%
tally(wt = count)
ggplot(gender_balance, aes(x = year, y = percent)) +
geom_point(aes(color = gender)) +
scale_x_discrete(breaks = seq(from = 1890, to = 2010, by = 10)) +
theme_bw() +
scale_color_manual(values=c("red", "blue")) +
ggtitle("Names by gender by year")
gender_balance <- dataset %>%
group_by(year, gender) %>%
tally(wt = count)
ggplot(gender_balance, aes(x = year, y = count)) +
geom_point(aes(color = gender)) +
scale_x_discrete(breaks = seq(from = 1890, to = 2010, by = 10)) +
theme_bw() +
scale_color_manual(values=c("red", "blue")) +
ggtitle("Names by gender by year")
ggplot(gender_balance, aes(x = year, y = count)) +
geom_point(aes(color = gender))
gender_balance
gender_balance <- dataset %>%
group_by(year, gender) %>%
tally(wt = count) %>%
rename(count = n)
ggplot(gender_balance, aes(x = year, y = count)) +
geom_point(aes(color = gender)) +
scale_x_discrete(breaks = seq(from = 1890, to = 2010, by = 10)) +
theme_bw() +
scale_color_manual(values=c("red", "blue")) +
ggtitle("Names by gender by year")
summarize_names()
summarize_names <- function(start = 0, end = Inf, gender_arg = 'F') {
dataset %>%
filter(count > 499) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg)
}
summarize_names(1920, 1950, "F")
summarize_names(1920, 1950, "M")
max(dataset$year)
1950-1920
2015-30
men_old <- summarize_names(1920, 1950, "M")
men_old <- summarize_names(1920, 1950, "M")
women_old <- summarize_names(1920, 1950, "F")
women_old <- summarize_names(1920, 1950, "F")
men_new <- summarize_names(1985, 2015, "M")
women_old <- summarize_names(1920, 1950, "F")
men_new <- summarize_names(1985, 2015, "M")
women_new <- summarize_names(1985, 2015, "F")
summarize_names <- function(start = 0, end = Inf, gender_arg = "F") {
dataset %>%
filter(count > 499) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg)
select(name, count)
}
men_old <- summarize_names(1920, 1950, "M")
men_old <- summarize_names(1920, 1950, "M")
summarize_names <- function(start = 0, end = Inf, gender_arg = "F") {
dataset %>%
filter(count > 499) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg) %>%
select(name, count)
}
men_old <- summarize_names(1920, 1950, "M")
women_old <- summarize_names(1920, 1950, "F")
men_new <- summarize_names(1985, 2015, "M")
inner_join(men_old, women_old)
men_old
summarize_names <- function(start = 0, end = Inf, gender_arg = "F", count_name = "count") {
dataset %>%
filter(count > 499) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count_name = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg) %>%
select(name, count)
}
summarize_names
summarize_names()
summarize_names <- function(start = 0, end = Inf, gender_arg = "F") {
dataset %>%
filter(count > 499) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg) %>%
select(name, count)
}
men_old <- summarize_names(1920, 1950, "M") %>% rename(men = count)
old <- inner_join(men_old, women_old)
old <- inner_join(men_old, women_old)
old
new
dataset_old <- inner_join(men_old, women_old)
men_old
men_new
women_old
women_new
women_old <- summarize_names(1920, 1950, "F") %>% rename(women = count)
women_old
men_old <- summarize_names(1920, 1950, "M") %>% rename(men = count)
women_old <- summarize_names(1920, 1950, "F") %>% rename(women = count)
men_new <- summarize_names(1985, 2015, "M") %>% rename(men = count)
women_new <- summarize_names(1985, 2015, "F") %>% rename(women = count)
dataset_old <- inner_join(men_old, women_old)
dataset_old
dataset_new
dataset_new
dataset_new <- inner_join(men_new, women_new)
dataset_new
dataset_old <- inner_join(men_old, women_old) %>%
group_by(name) %>%
mutate(per_f = women / sum(men + women))
dataset_old
dataset_old <- inner_join(men_old, women_old) %>%
group_by(name) %>%
mutate(per_f_old = women / sum(men + women)) %>%
select(name, per_f_old)
dataset_new <- inner_join(men_new, women_new) %>%
group_by(name) %>%
mutate(per_f_new = women / sum(men + women)) %>%
select(name, per_f_new)
inner_join(dataset_old, dataset_new)
summarize_names <- function(start = 0, end = Inf, gender_arg = "F") {
dataset %>%
filter(count > 99) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg) %>%
select(name, count)
}
summarize_names <- function(start = 0, end = Inf, gender_arg = "F") {
dataset %>%
filter(count > 9) %>%
filter(year >= start) %>%
filter(year <= end) %>%
group_by(name, gender) %>%
tally(wt = count) %>%
rename(count = n) %>%
arrange(name, gender) %>%
filter(gender == gender_arg) %>%
select(name, count)
}
men_old <- summarize_names(1920, 1950, "M") %>% rename(men = count)
women_old <- summarize_names(1920, 1950, "F") %>% rename(women = count)
men_new <- summarize_names(1985, 2015, "M") %>% rename(men = count)
women_new <- summarize_names(1985, 2015, "F") %>% rename(women = count)
dataset_old <- inner_join(men_old, women_old) %>%
group_by(name) %>%
mutate(per_f_old = women / sum(men + women)) %>%
select(name, per_f_old)
dataset_new <- inner_join(men_new, women_new) %>%
group_by(name) %>%
mutate(per_f_new = women / sum(men + women)) %>%
select(name, per_f_new)
inner_join(dataset_old, dataset_new)
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new)
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
arrange(delta)
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
arrange(desc(delta))
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
arrange((delta))
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
arrange(abs(delta))
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
arrange(desc(abs(delta)))
?kable
library(knitr)
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
arrange(desc(abs(delta))) %>% kable
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `Female, `) %>%
kable()
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `Female, ` = per_f_old) %>%
kable()
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `% female, 1920-1950` = per_f_old) %>%
kable()
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `Percent female, old` = per_f_old, `Percent female, new` = per_f_new, `Change over time` = delta) %>%
kable()
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `Percent female, old` = per_f_old, `Percent female, new` = per_f_new, `Change over time` = delta) %>%
kable(digits = 2)
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `Percent female, old` = per_f_old, `Percent female, new` = per_f_new, `Change over time` = delta) %>%
kable(digits = 2)
inner_join(dataset_old, dataset_new) %>%
mutate(delta = per_f_old - per_f_new) %>%
filter(abs(delta) > 0.5) %>%
arrange(desc(abs(delta))) %>%
rename(Name = name, `Per female old` = per_f_old, `Per female, new` = per_f_new, `Change` = delta) %>%
kable(digits = 2)
library(knitr)
?left_join
rmd2md()
rmd2md()
